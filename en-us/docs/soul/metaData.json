{
  "filename": "metaData.md",
  "__html": "<h2>Description</h2>\n<ul>\n<li>This article mainly explains the concept,design of metadata and how to connect in the soul gateway.</li>\n</ul>\n<h2>Technical solutions</h2>\n<ul>\n<li>\n<p>Add a new table in the database,and data can synchronize to the JVM memory of gateway according to the data synchronization scheme.</p>\n</li>\n<li>\n<p>Table Structure:</p>\n</li>\n</ul>\n<pre><code class=\"language-sql\"><span class=\"hljs-keyword\">CREATE</span> <span class=\"hljs-keyword\">TABLE</span>  <span class=\"hljs-keyword\">IF</span> <span class=\"hljs-keyword\">NOT</span> <span class=\"hljs-keyword\">EXISTS</span> <span class=\"hljs-string\">`meta_data`</span> (\n  <span class=\"hljs-string\">`id`</span> <span class=\"hljs-built_in\">varchar</span>(<span class=\"hljs-number\">128</span>) <span class=\"hljs-built_in\">CHARACTER</span> <span class=\"hljs-keyword\">SET</span> utf8mb4 <span class=\"hljs-keyword\">COLLATE</span> utf8mb4_unicode_ci <span class=\"hljs-keyword\">NOT</span> <span class=\"hljs-literal\">NULL</span> <span class=\"hljs-keyword\">COMMENT</span> <span class=\"hljs-string\">'id'</span>,\n  <span class=\"hljs-string\">`app_name`</span> <span class=\"hljs-built_in\">varchar</span>(<span class=\"hljs-number\">255</span>) <span class=\"hljs-built_in\">CHARACTER</span> <span class=\"hljs-keyword\">SET</span> utf8mb4 <span class=\"hljs-keyword\">COLLATE</span> utf8mb4_unicode_ci <span class=\"hljs-keyword\">NOT</span> <span class=\"hljs-literal\">NULL</span> <span class=\"hljs-keyword\">COMMENT</span> <span class=\"hljs-string\">'application name'</span>,\n  <span class=\"hljs-string\">`path`</span> <span class=\"hljs-built_in\">varchar</span>(<span class=\"hljs-number\">255</span>) <span class=\"hljs-built_in\">CHARACTER</span> <span class=\"hljs-keyword\">SET</span> utf8mb4 <span class=\"hljs-keyword\">COLLATE</span> utf8mb4_unicode_ci <span class=\"hljs-keyword\">NOT</span> <span class=\"hljs-literal\">NULL</span> <span class=\"hljs-keyword\">COMMENT</span> <span class=\"hljs-string\">'path,not repeatable'</span>,\n  <span class=\"hljs-string\">`path_desc`</span> <span class=\"hljs-built_in\">varchar</span>(<span class=\"hljs-number\">255</span>) <span class=\"hljs-built_in\">CHARACTER</span> <span class=\"hljs-keyword\">SET</span> utf8mb4 <span class=\"hljs-keyword\">COLLATE</span> utf8mb4_unicode_ci <span class=\"hljs-keyword\">NOT</span> <span class=\"hljs-literal\">NULL</span> <span class=\"hljs-keyword\">COMMENT</span> <span class=\"hljs-string\">'path description'</span>,\n  <span class=\"hljs-string\">`rpc_type`</span> <span class=\"hljs-built_in\">varchar</span>(<span class=\"hljs-number\">64</span>) <span class=\"hljs-built_in\">CHARACTER</span> <span class=\"hljs-keyword\">SET</span> utf8mb4 <span class=\"hljs-keyword\">COLLATE</span> utf8mb4_unicode_ci <span class=\"hljs-keyword\">NOT</span> <span class=\"hljs-literal\">NULL</span> <span class=\"hljs-keyword\">COMMENT</span> <span class=\"hljs-string\">'rpc type\n  `service_name` varchar(255) CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci NULL DEFAULT NULL COMMENT '</span>service <span class=\"hljs-keyword\">name</span><span class=\"hljs-string\">',\n  `method_name` varchar(255) CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci NULL DEFAULT NULL COMMENT '</span>method <span class=\"hljs-keyword\">name</span><span class=\"hljs-string\">',\n  `parameter_types` varchar(255) CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci NULL DEFAULT NULL COMMENT '</span>multiple parameter types, <span class=\"hljs-keyword\">split</span> <span class=\"hljs-keyword\">by</span> comma<span class=\"hljs-string\">',\n  `rpc_ext` varchar(1024) CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci NULL DEFAULT NULL COMMENT '</span>rpc extension information,<span class=\"hljs-keyword\">json</span> <span class=\"hljs-keyword\">format</span><span class=\"hljs-string\">',\n  `date_created` datetime(0) NOT NULL COMMENT '</span><span class=\"hljs-keyword\">create</span> <span class=\"hljs-built_in\">date</span><span class=\"hljs-string\">',\n  `date_updated` datetime(0) NOT NULL ON UPDATE CURRENT_TIMESTAMP(0) COMMENT '</span><span class=\"hljs-keyword\">update</span> <span class=\"hljs-built_in\">date</span><span class=\"hljs-string\">',\n  `enabled` tinyint(4) NOT NULL DEFAULT 0 COMMENT '</span><span class=\"hljs-keyword\">enable</span> <span class=\"hljs-keyword\">status</span><span class=\"hljs-string\">',\n  PRIMARY KEY (`id`) USING BTREE\n) ENGINE = InnoDB CHARACTER SET = utf8mb4 COLLATE = utf8mb4_unicode_ci ROW_FORMAT = Dynamic;\n\n</span></code></pre>\n<ul>\n<li>\n<p>Metadata design as below,the most important is using it in dubbo's generalization call.</p>\n</li>\n<li>\n<p>Pay attention to the field <code>path</code>,we will match specific data according to your field path during requesting gateway,and then carry out the follow-up process.</p>\n</li>\n<li>\n<p>Pay attention to the field <code>rpc_ext</code>,if it is a dubbo service interface and service interface has group and version field,this field exists.</p>\n<ul>\n<li>dubbo field structure as below,then we store json format string.</li>\n</ul>\n<pre><code class=\"language-java\"> <span class=\"hljs-keyword\">public</span> <span class=\"hljs-keyword\">static</span> <span class=\"hljs-class\"><span class=\"hljs-keyword\">class</span> <span class=\"hljs-title\">RpcExt</span> </span>{\n        \n        <span class=\"hljs-keyword\">private</span> String group;\n        \n        <span class=\"hljs-keyword\">private</span> String version;\n        \n        <span class=\"hljs-keyword\">private</span> String loadbalance;\n        \n        <span class=\"hljs-keyword\">private</span> Integer retries;\n        \n        <span class=\"hljs-keyword\">private</span> Integer timeout;\n\n    }\n</code></pre>\n</li>\n</ul>\n<h2>MetaData Storage</h2>\n<ul>\n<li>\n<p>a dubbo interface corresponds to a meta data.</p>\n</li>\n<li>\n<p>spring cloud protocol,only store one record, path: <code>/contextPath/**</code>.</p>\n</li>\n<li>\n<p>http service,no data.</p>\n</li>\n</ul>\n",
  "link": "\\en-us\\docs\\soul\\metaData.html",
  "meta": {
    "title": "MetaData Concept Design",
    "keywords": "soul",
    "description": "MetaData Concept Design"
  }
}