{
  "filename": "plugin-handle.md",
  "__html": "<h2>说明</h2>\n<ul>\n<li>在soul-admin后台，每个插件都用handle（json格式）字段来表示不同的处理，而插件处理是就是用来管理编辑json里面的自定义处理字段。</li>\n<li>该功能主要是用来支持插件处理模板化配置的</li>\n</ul>\n<h3>表设计</h3>\n<ul>\n<li>sql</li>\n</ul>\n<pre><code class=\"language-sql\"><span class=\"hljs-keyword\">CREATE</span> <span class=\"hljs-keyword\">TABLE</span> <span class=\"hljs-keyword\">IF</span> <span class=\"hljs-keyword\">NOT</span> <span class=\"hljs-keyword\">EXISTS</span> <span class=\"hljs-string\">`plugin_handle`</span> (\n  <span class=\"hljs-string\">`id`</span> <span class=\"hljs-built_in\">varchar</span>(<span class=\"hljs-number\">128</span>) <span class=\"hljs-keyword\">NOT</span> <span class=\"hljs-literal\">NULL</span>,\n  <span class=\"hljs-string\">`plugin_id`</span> <span class=\"hljs-built_in\">varchar</span>(<span class=\"hljs-number\">128</span>) <span class=\"hljs-keyword\">NOT</span> <span class=\"hljs-literal\">NULL</span> <span class=\"hljs-keyword\">COMMENT</span> <span class=\"hljs-string\">'插件id'</span>,\n  <span class=\"hljs-string\">`field`</span> <span class=\"hljs-built_in\">varchar</span>(<span class=\"hljs-number\">100</span>) <span class=\"hljs-keyword\">NOT</span> <span class=\"hljs-literal\">NULL</span> <span class=\"hljs-keyword\">COMMENT</span> <span class=\"hljs-string\">'字段'</span>,\n  <span class=\"hljs-string\">`label`</span> <span class=\"hljs-built_in\">varchar</span>(<span class=\"hljs-number\">100</span>) <span class=\"hljs-keyword\">DEFAULT</span> <span class=\"hljs-literal\">NULL</span> <span class=\"hljs-keyword\">COMMENT</span> <span class=\"hljs-string\">'标签'</span>,\n  <span class=\"hljs-string\">`data_type`</span> <span class=\"hljs-built_in\">smallint</span>(<span class=\"hljs-number\">6</span>) <span class=\"hljs-keyword\">NOT</span> <span class=\"hljs-literal\">NULL</span> <span class=\"hljs-keyword\">DEFAULT</span> <span class=\"hljs-string\">'1'</span> <span class=\"hljs-keyword\">COMMENT</span> <span class=\"hljs-string\">'数据类型 1 数字 2 字符串 3 下拉框'</span>,\n  <span class=\"hljs-string\">`type`</span> <span class=\"hljs-built_in\">smallint</span>(<span class=\"hljs-number\">6</span>) <span class=\"hljs-literal\">NULL</span> <span class=\"hljs-keyword\">COMMENT</span> <span class=\"hljs-string\">'类型,1 表示选择器，2 表示规则'</span>,\n  <span class=\"hljs-string\">`sort`</span> <span class=\"hljs-built_in\">int</span>(<span class=\"hljs-number\">4</span>)  <span class=\"hljs-literal\">NULL</span> <span class=\"hljs-keyword\">COMMENT</span> <span class=\"hljs-string\">'排序'</span>,\n  <span class=\"hljs-string\">`ext_obj`</span> <span class=\"hljs-built_in\">varchar</span>(<span class=\"hljs-number\">1024</span>) <span class=\"hljs-keyword\">DEFAULT</span> <span class=\"hljs-literal\">NULL</span> <span class=\"hljs-keyword\">COMMENT</span> <span class=\"hljs-string\">'额外配置（json格式数据）'</span>,\n  <span class=\"hljs-string\">`date_created`</span> <span class=\"hljs-built_in\">timestamp</span> <span class=\"hljs-keyword\">NOT</span> <span class=\"hljs-literal\">NULL</span> <span class=\"hljs-keyword\">DEFAULT</span> <span class=\"hljs-keyword\">CURRENT_TIMESTAMP</span> <span class=\"hljs-keyword\">COMMENT</span> <span class=\"hljs-string\">'创建时间'</span>,\n  <span class=\"hljs-string\">`date_updated`</span> <span class=\"hljs-built_in\">timestamp</span> <span class=\"hljs-keyword\">NOT</span> <span class=\"hljs-literal\">NULL</span> <span class=\"hljs-keyword\">DEFAULT</span> <span class=\"hljs-keyword\">CURRENT_TIMESTAMP</span> <span class=\"hljs-keyword\">ON</span> <span class=\"hljs-keyword\">UPDATE</span> <span class=\"hljs-keyword\">CURRENT_TIMESTAMP</span> <span class=\"hljs-keyword\">COMMENT</span> <span class=\"hljs-string\">'更新时间'</span>,\n  PRIMARY <span class=\"hljs-keyword\">KEY</span> (<span class=\"hljs-string\">`id`</span>),\n  <span class=\"hljs-keyword\">UNIQUE</span> <span class=\"hljs-keyword\">KEY</span> <span class=\"hljs-string\">`plugin_id_field_type`</span> (<span class=\"hljs-string\">`plugin_id`</span>,<span class=\"hljs-string\">`field`</span>,<span class=\"hljs-string\">`type`</span>)\n) <span class=\"hljs-keyword\">ENGINE</span>=<span class=\"hljs-keyword\">InnoDB</span>;\n</code></pre>\n<h3>使用教程</h3>\n<p>比如开发springCloud插件时规则表需要存一些配置到handle字段，配置对应的实体类如下：</p>\n<pre><code class=\"language-java\"><span class=\"hljs-keyword\">public</span> <span class=\"hljs-class\"><span class=\"hljs-keyword\">class</span> <span class=\"hljs-title\">SpringCloudRuleHandle</span> <span class=\"hljs-keyword\">implements</span> <span class=\"hljs-title\">RuleHandle</span> </span>{\n\n    <span class=\"hljs-comment\">/**\n     * this remote uri path.\n     */</span>\n    <span class=\"hljs-keyword\">private</span> String path;\n\n    <span class=\"hljs-comment\">/**\n     * timeout is required.\n     */</span>\n    <span class=\"hljs-keyword\">private</span> <span class=\"hljs-keyword\">long</span> timeout = Constants.TIME_OUT;    }\n}\n</code></pre>\n<p>第一步. 我们可以直接在插件管理界面 <code>http://localhost:9095/#/system/plugin</code> 点击编辑插件处理\n<img src=\"https://yu199195.github.io/images/soul/plugin-manager.png\" alt=\"\"></p>\n<p>第二步. 新增一个字符串类型字段path和一个数字类型的timeout</p>\n<p><img src=\"https://yu199195.github.io/images/soul/add-plugin-handle.png\" alt=\"\"></p>\n<p>第三步. 在插件规则配置页面新增规则时就可以直接输入path、timeout然后提交保存到handle字段了</p>\n<p><img src=\"https://yu199195.github.io/images/soul/springcloud-rule-handle.png\" alt=\"\"></p>\n<p><em>注意：如果配置了data_type为3 选择框, 则规则新增页面里输入框下拉选择是通过field字段去<a href=\"soul-dict.md\">字典表（soul_dict）</a>查出所有可选项出来展示选择</em></p>\n<ul>\n<li>比如sentinel插件包含多种数据类型的字段，如下图</li>\n</ul>\n<p><img src=\"https://yu199195.github.io/images/soul/sentinel-rule-handle.png\" alt=\"\"></p>\n",
  "link": "\\zh-cn\\docs\\soul\\plugin-handle.html",
  "meta": {
    "title": "插件处理详解",
    "keywords": "plugin",
    "description": "插件处理详解"
  }
}