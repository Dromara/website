{
  "filename": "plugin-waf.md",
  "__html": "<h2>说明</h2>\n<ul>\n<li>waf插件，是网关的用来对流量实现防火墙功能的核心实现。</li>\n</ul>\n<h2>插件设置</h2>\n<ul>\n<li>\n<p>在 <code>soul-admin</code> --&gt; 插件管理-&gt; <code>waf</code> 设置为开启。</p>\n</li>\n<li>\n<p>如果用户不想使用此功能，请在admin后台停用此插件。</p>\n</li>\n<li>\n<p>插件编辑里面新增配置模式。</p>\n</li>\n</ul>\n<pre><code class=\"language-yaml\"><span class=\"hljs-string\">{\"model\":\"black\"}</span>  \n<span class=\"hljs-comment\"># 默认为黑名单模式，设置值为 mixed 则为混合模式，下面会专门进行讲解</span>\n</code></pre>\n<h2>插件使用</h2>\n<ul>\n<li>在网关的 pom.xml 文件中添加 <code>waf</code> 的支持。</li>\n</ul>\n<pre><code class=\"language-xml\">  <span class=\"hljs-comment\">&lt;!-- soul waf plugin start--&gt;</span>\n  <span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">dependency</span>&gt;</span>\n      <span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">groupId</span>&gt;</span>org.dromara<span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">groupId</span>&gt;</span>\n      <span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">artifactId</span>&gt;</span>soul-spring-boot-starter-plugin-waf<span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">artifactId</span>&gt;</span>\n      <span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">version</span>&gt;</span>${last.version}<span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">version</span>&gt;</span>\n  <span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">dependency</span>&gt;</span>\n  <span class=\"hljs-comment\">&lt;!-- soul waf plugin end--&gt;</span>\n</code></pre>\n<ul>\n<li>\n<p>选择器和规则，请详细看：<a href=\"selector.md\">选择器规则</a></p>\n<ul>\n<li>\n<p>当 <code>module</code> 设置为 <code>black</code> 模式的时候，只有匹配的流量才会执行拒绝策略，不匹配的，直接会跳过。</p>\n</li>\n<li>\n<p>当 <code>module</code> 设置为 <code>mixed</code> 模式的时候，所有的流量都会通过 waf插件，针对不同的匹配流量，用户可以设置是 拒绝，还是通过。</p>\n</li>\n</ul>\n</li>\n</ul>\n<h2>场景</h2>\n<ul>\n<li>\n<p>waf插件也是soul的前置插件，主要用来拦截非法请求，或者异常请求，并且给与相关的拒绝策略。</p>\n</li>\n<li>\n<p>当面对重放攻击时，你可以根据ip或者host来进行匹配，拦截掉非法的ip与host，设置reject策略。</p>\n</li>\n<li>\n<p>关于如何确定 ip 与 host 值，请看<a href=\"dev-iphost.md\">ip与host</a></p>\n</li>\n</ul>\n",
  "link": "/zh-cn/docs/soul/plugin-waf.html",
  "meta": {
    "title": "waf插件",
    "keywords": "waf",
    "description": "waf插件"
  }
}