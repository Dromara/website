{
  "filename": "plugin-websocket.md",
  "__html": "<h2>说明</h2>\n<ul>\n<li>\n<p>soul网关是支持 websocket的代理。</p>\n</li>\n<li>\n<p>websocket支持中，使用了divide插件。</p>\n</li>\n</ul>\n<h2>插件设置</h2>\n<ul>\n<li>\n<p>在 <code>soul-admin</code> --&gt; 插件管理 --&gt; <code>divide</code>，设置为开启。</p>\n</li>\n<li>\n<p>在网关的 pom.xml 文件中新增依赖</p>\n</li>\n</ul>\n<pre><code class=\"language-xml\">  <span class=\"hljs-comment\">&lt;!--if you use http proxy start this--&gt;</span>\n   <span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">dependency</span>&gt;</span>\n       <span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">groupId</span>&gt;</span>org.dromara<span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">groupId</span>&gt;</span>\n       <span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">artifactId</span>&gt;</span>soul-spring-boot-starter-plugin-divide<span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">artifactId</span>&gt;</span>\n       <span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">version</span>&gt;</span>${last.version}<span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">version</span>&gt;</span>\n   <span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">dependency</span>&gt;</span>\n\n   <span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">dependency</span>&gt;</span>\n       <span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">groupId</span>&gt;</span>org.dromara<span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">groupId</span>&gt;</span>\n       <span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">artifactId</span>&gt;</span>soul-spring-boot-starter-plugin-httpclient<span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">artifactId</span>&gt;</span>\n       <span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">version</span>&gt;</span>${last.version}<span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">version</span>&gt;</span>\n   <span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">dependency</span>&gt;</span>\n</code></pre>\n<h2>请求路径</h2>\n<ul>\n<li>使用soul代理websocket的时候，其请求路径为（例子）：<code>ws://localhost:9195/?module=ws&amp;method=/websocket&amp;rpcType=websocket</code>。</li>\n</ul>\n<pre><code class=\"language-yaml\"><span class=\"hljs-string\">参数详解:</span>\n<span class=\"hljs-number\">1.</span><span class=\"hljs-string\">localhost:8080</span> <span class=\"hljs-string\">是soul启动的ip和端口。</span>\n<span class=\"hljs-number\">2.</span><span class=\"hljs-string\">module（必填）：值是你用来匹配selector的关键</span>\n<span class=\"hljs-number\">3.</span><span class=\"hljs-string\">method</span> <span class=\"hljs-string\">（参数）:</span> <span class=\"hljs-string\">你的</span> <span class=\"hljs-string\">websocket路径，同时也用做匹配rule</span>\n<span class=\"hljs-number\">4.</span><span class=\"hljs-string\">rpcType</span> <span class=\"hljs-string\">：websocket</span> <span class=\"hljs-string\">必填，且必须为websocket</span>\n</code></pre>\n<ul>\n<li>在 <code>divide</code>插件中选择器新增一条配置，如下</li>\n</ul>\n<p><img src=\"https://yu199195.github.io/images/soul/websocket-selector.png\" alt=\"\"></p>\n<ul>\n<li>在这一条选择器下新增一条 规则 ：</li>\n</ul>\n<p><img src=\"https://yu199195.github.io/images/soul/websocket-rule.png\" alt=\"\"></p>\n<ul>\n<li>\n<p>总结，这个时候注意看你的路径 <code>ws://localhost:9195/?module=ws&amp;method=/websocket&amp;rpcType=websocket</code>。</p>\n<p>它就会被你新增的选择器规则匹配，然后代理的的真实websocket地址为：<code>127.0.0.1:8080/websocket</code>，这样soul就进行的websocket的代理。</p>\n<p>你就可以进行和websocket服务进行通信了，就是这么简单。</p>\n</li>\n<li>\n<p>最后再说一句，module，method 命名和值，你完全可以自己来决定，我的只是列子，只要选择器 和规则能够匹配就行。</p>\n</li>\n</ul>\n",
  "link": "/zh-cn/docs/soul/plugin-websocket.html",
  "meta": {
    "title": "websocket支持",
    "keywords": "soul",
    "description": "websocket支持"
  }
}