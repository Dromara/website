{
  "filename": "config.md",
  "__html": "<h3>配置详解：</h3>\n<ul>\n<li>\n<p>文件名为 : <code>hmily.yml</code>。</p>\n</li>\n<li>\n<p>路径： 默认路径为项目的 <code>resource</code>目录下，也可以使用 <code>-Dhmily.conf</code> 指定，也可以把配置放在 <code>user.dir</code> 目录下。\n优先级别 <code>-Dhmily.conf</code> &gt; <code>user.dir</code> &gt; <code>resource</code></p>\n</li>\n</ul>\n<pre><code class=\"language-yaml\"><span class=\"hljs-attr\">hmily:</span>\n  <span class=\"hljs-attr\">server:</span>\n    <span class=\"hljs-attr\">configMode:</span> <span class=\"hljs-string\">local</span>\n    <span class=\"hljs-attr\">appName:</span> <span class=\"hljs-string\">xiaoyu</span>\n  <span class=\"hljs-comment\">#  如果server.configMode eq local 的时候才会读取到这里的配置信息.</span>\n  <span class=\"hljs-attr\">config:</span>\n    <span class=\"hljs-attr\">appName:</span> <span class=\"hljs-string\">xiaoyu</span>\n    <span class=\"hljs-attr\">serializer:</span> <span class=\"hljs-string\">kryo</span>\n    <span class=\"hljs-attr\">contextTransmittalMode:</span> <span class=\"hljs-string\">threadLocal</span>\n    <span class=\"hljs-attr\">scheduledThreadMax:</span> <span class=\"hljs-number\">16</span>\n    <span class=\"hljs-attr\">scheduledRecoveryDelay:</span> <span class=\"hljs-number\">60</span>\n    <span class=\"hljs-attr\">scheduledCleanDelay:</span> <span class=\"hljs-number\">60</span>\n    <span class=\"hljs-attr\">scheduledPhyDeletedDelay:</span> <span class=\"hljs-number\">600</span>\n    <span class=\"hljs-attr\">scheduledInitDelay:</span> <span class=\"hljs-number\">30</span>\n    <span class=\"hljs-attr\">recoverDelayTime:</span> <span class=\"hljs-number\">60</span>\n    <span class=\"hljs-attr\">cleanDelayTime:</span> <span class=\"hljs-number\">180</span>\n    <span class=\"hljs-attr\">limit:</span> <span class=\"hljs-number\">200</span>\n    <span class=\"hljs-attr\">retryMax:</span> <span class=\"hljs-number\">10</span>\n    <span class=\"hljs-attr\">bufferSize:</span> <span class=\"hljs-number\">8192</span>\n    <span class=\"hljs-attr\">consumerThreads:</span> <span class=\"hljs-number\">16</span>\n    <span class=\"hljs-attr\">asyncRepository:</span> <span class=\"hljs-literal\">true</span>\n    <span class=\"hljs-attr\">autoSql:</span> <span class=\"hljs-literal\">true</span>\n    <span class=\"hljs-attr\">phyDeleted:</span> <span class=\"hljs-literal\">true</span>\n    <span class=\"hljs-attr\">storeDays:</span> <span class=\"hljs-number\">3</span>\n    <span class=\"hljs-attr\">repository:</span> <span class=\"hljs-string\">mysql</span>\n\n<span class=\"hljs-attr\">repository:</span>\n  <span class=\"hljs-attr\">database:</span>\n    <span class=\"hljs-attr\">driverClassName:</span> <span class=\"hljs-string\">com.mysql.jdbc.Driver</span>\n    <span class=\"hljs-attr\">url :</span>\n    <span class=\"hljs-attr\">username:</span>\n    <span class=\"hljs-attr\">password:</span>\n    <span class=\"hljs-attr\">maxActive:</span> <span class=\"hljs-number\">20</span>\n    <span class=\"hljs-attr\">minIdle:</span> <span class=\"hljs-number\">10</span>\n    <span class=\"hljs-attr\">connectionTimeout:</span> <span class=\"hljs-number\">30000</span>\n    <span class=\"hljs-attr\">idleTimeout:</span> <span class=\"hljs-number\">600000</span>\n    <span class=\"hljs-attr\">maxLifetime:</span> <span class=\"hljs-number\">1800000</span>\n  <span class=\"hljs-attr\">file:</span>\n    <span class=\"hljs-attr\">path:</span>\n    <span class=\"hljs-attr\">prefix:</span> <span class=\"hljs-string\">/hmily</span>\n  <span class=\"hljs-attr\">mongo:</span>\n    <span class=\"hljs-attr\">databaseName:</span>\n    <span class=\"hljs-attr\">url:</span>\n    <span class=\"hljs-attr\">userName:</span>\n    <span class=\"hljs-attr\">password:</span>\n  <span class=\"hljs-attr\">zookeeper:</span>\n    <span class=\"hljs-attr\">host:</span> <span class=\"hljs-string\">localhost:2181</span>\n    <span class=\"hljs-attr\">sessionTimeOut:</span> <span class=\"hljs-number\">1000</span>\n    <span class=\"hljs-attr\">rootPath:</span> <span class=\"hljs-string\">/hmily</span>\n  <span class=\"hljs-attr\">redis:</span>\n    <span class=\"hljs-attr\">cluster:</span> <span class=\"hljs-literal\">false</span>\n    <span class=\"hljs-attr\">sentinel:</span> <span class=\"hljs-literal\">false</span>\n    <span class=\"hljs-attr\">clusterUrl:</span>\n    <span class=\"hljs-attr\">sentinelUrl:</span>\n    <span class=\"hljs-attr\">masterName:</span>\n    <span class=\"hljs-attr\">hostName:</span>\n    <span class=\"hljs-attr\">port:</span>\n    <span class=\"hljs-attr\">password:</span>\n    <span class=\"hljs-attr\">maxTotal:</span> <span class=\"hljs-number\">8</span>\n    <span class=\"hljs-attr\">maxIdle:</span> <span class=\"hljs-number\">8</span>\n    <span class=\"hljs-attr\">minIdle:</span> <span class=\"hljs-number\">2</span>\n    <span class=\"hljs-attr\">maxWaitMillis:</span> <span class=\"hljs-number\">-1</span>\n    <span class=\"hljs-attr\">minEvictableIdleTimeMillis:</span> <span class=\"hljs-number\">1800000</span>\n    <span class=\"hljs-attr\">softMinEvictableIdleTimeMillis:</span> <span class=\"hljs-number\">1800000</span>\n    <span class=\"hljs-attr\">numTestsPerEvictionRun:</span> <span class=\"hljs-number\">3</span>\n    <span class=\"hljs-attr\">testOnCreate:</span> <span class=\"hljs-literal\">false</span>\n    <span class=\"hljs-attr\">testOnBorrow:</span> <span class=\"hljs-literal\">false</span>\n    <span class=\"hljs-attr\">testOnReturn:</span> <span class=\"hljs-literal\">false</span>\n    <span class=\"hljs-attr\">testWhileIdle:</span> <span class=\"hljs-literal\">false</span>\n    <span class=\"hljs-attr\">timeBetweenEvictionRunsMillis:</span> <span class=\"hljs-number\">-1</span>\n    <span class=\"hljs-attr\">blockWhenExhausted:</span> <span class=\"hljs-literal\">true</span>\n    <span class=\"hljs-attr\">timeOut:</span> <span class=\"hljs-number\">1000</span>\n\n<span class=\"hljs-attr\">metrics:</span>\n  <span class=\"hljs-attr\">metricsName:</span> <span class=\"hljs-string\">prometheus</span>\n  <span class=\"hljs-attr\">host:</span>\n  <span class=\"hljs-attr\">port:</span> <span class=\"hljs-number\">9091</span>\n  <span class=\"hljs-attr\">async:</span> <span class=\"hljs-literal\">true</span>\n  <span class=\"hljs-attr\">threadCount :</span> <span class=\"hljs-number\">16</span>\n  <span class=\"hljs-attr\">jmxConfig:</span>\n</code></pre>\n<h3>hmily.server配置</h3>\n<table>\n<thead>\n<tr>\n<th style=\"text-align:left\">名称</th>\n<th style=\"text-align:left\">类型</th>\n<th style=\"text-align:center\">默认值</th>\n<th style=\"text-align:center\">是否必填</th>\n<th style=\"text-align:left\">说明</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td style=\"text-align:left\">configMode</td>\n<td style=\"text-align:left\">String</td>\n<td style=\"text-align:center\">local</td>\n<td style=\"text-align:center\">必填</td>\n<td style=\"text-align:left\">配置模式，现在支持local,zookeeper,nacos,apollo,配置为local，则会读取yml文件里的配置，其他模式，则会读取配置中心的</td>\n</tr>\n<tr>\n<td style=\"text-align:left\">appName</td>\n<td style=\"text-align:left\">String</td>\n<td style=\"text-align:center\">无</td>\n<td style=\"text-align:center\">必填</td>\n<td style=\"text-align:left\">应用的名称，如果hmilyConfig中也配置了appName则会覆盖此配置</td>\n</tr>\n</tbody>\n</table>\n<h3>hmily.config配置</h3>\n<ul>\n<li>这是整个框架的核心配置</li>\n</ul>\n<table>\n<thead>\n<tr>\n<th style=\"text-align:left\">名称</th>\n<th style=\"text-align:left\">类型</th>\n<th style=\"text-align:center\">默认值</th>\n<th style=\"text-align:center\">是否必填</th>\n<th style=\"text-align:left\">说明</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td style=\"text-align:left\">appName</td>\n<td style=\"text-align:left\">String</td>\n<td style=\"text-align:center\">无</td>\n<td style=\"text-align:center\">必填</td>\n<td style=\"text-align:left\">一般填你微服务的应用名称，请不要重复</td>\n</tr>\n<tr>\n<td style=\"text-align:left\">serializer</td>\n<td style=\"text-align:left\">String</td>\n<td style=\"text-align:center\">kryo</td>\n<td style=\"text-align:center\">非必填</td>\n<td style=\"text-align:left\">这是指定事务日志的序列化方式，目前支持填写 <code>kryo</code>, <code>hessian</code>, <code>jdk</code>, <code>jdk</code>, <code>protostuff</code></td>\n</tr>\n<tr>\n<td style=\"text-align:left\">contextTransmittalMode</td>\n<td style=\"text-align:left\">String</td>\n<td style=\"text-align:center\">threadLocal</td>\n<td style=\"text-align:center\">非必填</td>\n<td style=\"text-align:left\">这是事务上下文传递的模式，目前支持填写 <code>threadLocal</code>, <code>transmittable</code> (跨线程模式)</td>\n</tr>\n<tr>\n<td style=\"text-align:left\">scheduledThreadMax</td>\n<td style=\"text-align:left\">int</td>\n<td style=\"text-align:center\">CPU * 2</td>\n<td style=\"text-align:center\">非必填</td>\n<td style=\"text-align:left\">调度线程数最大线程数量</td>\n</tr>\n<tr>\n<td style=\"text-align:left\">scheduledRecoveryDelay</td>\n<td style=\"text-align:left\">int(单位:秒)</td>\n<td style=\"text-align:center\">60</td>\n<td style=\"text-align:center\">非必填</td>\n<td style=\"text-align:left\">事务日志自动恢复调度周期</td>\n</tr>\n<tr>\n<td style=\"text-align:left\">scheduledCleanDelay</td>\n<td style=\"text-align:left\">int(单位:秒)</td>\n<td style=\"text-align:center\">60</td>\n<td style=\"text-align:center\">非必填</td>\n<td style=\"text-align:left\">事务日志清理调度周期</td>\n</tr>\n<tr>\n<td style=\"text-align:left\">scheduledPhyDeletedDelay</td>\n<td style=\"text-align:left\">int(单位:秒)</td>\n<td style=\"text-align:center\">60</td>\n<td style=\"text-align:center\">非必填</td>\n<td style=\"text-align:left\">事务日志物理删除调度周期</td>\n</tr>\n<tr>\n<td style=\"text-align:left\">scheduledInitDelay</td>\n<td style=\"text-align:left\">int(单位:秒)</td>\n<td style=\"text-align:center\">30</td>\n<td style=\"text-align:center\">非必填</td>\n<td style=\"text-align:left\">调度任务启动延迟时间</td>\n</tr>\n<tr>\n<td style=\"text-align:left\">recoverDelayTime</td>\n<td style=\"text-align:left\">int(单位:秒)</td>\n<td style=\"text-align:center\">60</td>\n<td style=\"text-align:center\">非必填</td>\n<td style=\"text-align:left\">事务日志恢复迟延时间</td>\n</tr>\n<tr>\n<td style=\"text-align:left\">cleanDelayTime</td>\n<td style=\"text-align:left\">int(单位:秒)</td>\n<td style=\"text-align:center\">60</td>\n<td style=\"text-align:center\">非必填</td>\n<td style=\"text-align:left\">事务日志清理迟延时间</td>\n</tr>\n<tr>\n<td style=\"text-align:left\">limit</td>\n<td style=\"text-align:left\">int</td>\n<td style=\"text-align:center\">100</td>\n<td style=\"text-align:center\">非必填</td>\n<td style=\"text-align:left\">获取事务日志行数大小</td>\n</tr>\n<tr>\n<td style=\"text-align:left\">retryMax</td>\n<td style=\"text-align:left\">int</td>\n<td style=\"text-align:center\">10</td>\n<td style=\"text-align:center\">非必填</td>\n<td style=\"text-align:left\">最大重试次数</td>\n</tr>\n<tr>\n<td style=\"text-align:left\">bufferSize</td>\n<td style=\"text-align:left\">int</td>\n<td style=\"text-align:center\">4096 * 2 * 2</td>\n<td style=\"text-align:center\">非必填</td>\n<td style=\"text-align:left\">disruptor的bufferSize大小</td>\n</tr>\n<tr>\n<td style=\"text-align:left\">consumerThreads</td>\n<td style=\"text-align:left\">int</td>\n<td style=\"text-align:center\">CPU * 2</td>\n<td style=\"text-align:center\">非必填</td>\n<td style=\"text-align:left\">disruptor消费者线程数量</td>\n</tr>\n<tr>\n<td style=\"text-align:left\">asyncRepository</td>\n<td style=\"text-align:left\">boolean</td>\n<td style=\"text-align:center\">true</td>\n<td style=\"text-align:center\">非必填</td>\n<td style=\"text-align:left\">是否异步存储事务日志，设置为false则为同步</td>\n</tr>\n<tr>\n<td style=\"text-align:left\">autoSql</td>\n<td style=\"text-align:left\">boolean</td>\n<td style=\"text-align:center\">true</td>\n<td style=\"text-align:center\">非必填</td>\n<td style=\"text-align:left\">是否自动执行框架自动建库建表SQL语句（如果已经创建可以设置为false）</td>\n</tr>\n<tr>\n<td style=\"text-align:left\">phyDeleted</td>\n<td style=\"text-align:left\">boolean</td>\n<td style=\"text-align:center\">true</td>\n<td style=\"text-align:center\">非必填</td>\n<td style=\"text-align:left\">在运行过程中，是否物理删除日志。设置为false，则只会更改日志状态</td>\n</tr>\n<tr>\n<td style=\"text-align:left\">storeDays</td>\n<td style=\"text-align:left\">int(单位:天)</td>\n<td style=\"text-align:center\">3</td>\n<td style=\"text-align:center\">非必填</td>\n<td style=\"text-align:left\">如果 phyDeleted 设置为false的时候，日志存储天数</td>\n</tr>\n<tr>\n<td style=\"text-align:left\">repository</td>\n<td style=\"text-align:left\">String</td>\n<td style=\"text-align:center\">mysql</td>\n<td style=\"text-align:center\">必填</td>\n<td style=\"text-align:left\">这是指定事务日志的存储方式，目前支持填写 <code>mysql</code>, <code>oracle</code>, <code>postgresql</code>, <code>sqlserver</code>, <code>mongo</code>, <code>redis</code>, <code>file</code></td>\n</tr>\n</tbody>\n</table>\n<h3>repository配置</h3>\n<p>repository是Hmily用来存储事务日志的配置，目前支持:database(mysql, oracle, postgresql, sqlserver), file(本地模式，测试，开发环境用), mongodb, zookeeper, redis。</p>\n<ul>\n<li>database配置(默认使用hikari连接池):</li>\n</ul>\n<table>\n<thead>\n<tr>\n<th style=\"text-align:left\">名称</th>\n<th style=\"text-align:left\">类型</th>\n<th style=\"text-align:center\">默认值</th>\n<th style=\"text-align:center\">是否必填</th>\n<th style=\"text-align:left\">说明</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td style=\"text-align:left\">driverClassName</td>\n<td style=\"text-align:left\">String</td>\n<td style=\"text-align:center\">com.mysql.jdbc.Driver</td>\n<td style=\"text-align:center\">必填</td>\n<td style=\"text-align:left\">数据库的驱动类名称</td>\n</tr>\n<tr>\n<td style=\"text-align:left\">url</td>\n<td style=\"text-align:left\">String</td>\n<td style=\"text-align:center\">无</td>\n<td style=\"text-align:center\">必填</td>\n<td style=\"text-align:left\">数据库的url连接</td>\n</tr>\n<tr>\n<td style=\"text-align:left\">username</td>\n<td style=\"text-align:left\">String</td>\n<td style=\"text-align:center\">无</td>\n<td style=\"text-align:center\">必填</td>\n<td style=\"text-align:left\">数据库的用户名密码</td>\n</tr>\n<tr>\n<td style=\"text-align:left\">password</td>\n<td style=\"text-align:left\">String</td>\n<td style=\"text-align:center\">无</td>\n<td style=\"text-align:center\">必填</td>\n<td style=\"text-align:left\">数据库的密码</td>\n</tr>\n<tr>\n<td style=\"text-align:left\">maxActive</td>\n<td style=\"text-align:left\">int</td>\n<td style=\"text-align:center\">20</td>\n<td style=\"text-align:center\">非必填</td>\n<td style=\"text-align:left\">连接池连接最大活跃数</td>\n</tr>\n<tr>\n<td style=\"text-align:left\">minIdle</td>\n<td style=\"text-align:left\">int</td>\n<td style=\"text-align:center\">10</td>\n<td style=\"text-align:center\">非必填</td>\n<td style=\"text-align:left\">连接池最小空闲数</td>\n</tr>\n<tr>\n<td style=\"text-align:left\">connectionTimeout</td>\n<td style=\"text-align:left\">long</td>\n<td style=\"text-align:center\">30000</td>\n<td style=\"text-align:center\">非必填</td>\n<td style=\"text-align:left\">数据库的连接超时时间</td>\n</tr>\n<tr>\n<td style=\"text-align:left\">idleTimeout</td>\n<td style=\"text-align:left\">long</td>\n<td style=\"text-align:center\">60000</td>\n<td style=\"text-align:center\">非必填</td>\n<td style=\"text-align:left\">一个连接idle状态的最大时长（毫秒），超时则被释放（retired），缺省:10分钟</td>\n</tr>\n<tr>\n<td style=\"text-align:left\">maxLifetime</td>\n<td style=\"text-align:left\">long</td>\n<td style=\"text-align:center\">1800000</td>\n<td style=\"text-align:center\">非必填</td>\n<td style=\"text-align:left\">一个连接的生命时长（毫秒），超时而且没被使用则被释放（retired），缺省:30分钟，建议设置比数据库超时时长少30秒，参考MySQL wait_timeout参数（show variables like '%timeout%';</td>\n</tr>\n<tr>\n<td style=\"text-align:left\">idleTimeout</td>\n<td style=\"text-align:left\">long</td>\n<td style=\"text-align:center\">60000</td>\n<td style=\"text-align:center\">非必填</td>\n<td style=\"text-align:left\">一个连接idle状态的最大时长（毫秒），超时则被释放（retired），缺省:10分钟</td>\n</tr>\n<tr>\n<td style=\"text-align:left\">dataSourcePropertyMap</td>\n<td style=\"text-align:left\">Map&lt;String,Object&gt;</td>\n<td style=\"text-align:center\">无</td>\n<td style=\"text-align:center\">非必填</td>\n<td style=\"text-align:left\">hikari连接池的其他属性配置</td>\n</tr>\n</tbody>\n</table>\n<ul>\n<li>mongo配置:</li>\n</ul>\n<table>\n<thead>\n<tr>\n<th style=\"text-align:left\">名称</th>\n<th style=\"text-align:left\">类型</th>\n<th style=\"text-align:center\">默认值</th>\n<th style=\"text-align:center\">是否必填</th>\n<th style=\"text-align:left\">说明</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td style=\"text-align:left\">databaseName</td>\n<td style=\"text-align:left\">String</td>\n<td style=\"text-align:center\">无</td>\n<td style=\"text-align:center\">必填</td>\n<td style=\"text-align:left\">mongo数据库名称</td>\n</tr>\n<tr>\n<td style=\"text-align:left\">url</td>\n<td style=\"text-align:left\">String</td>\n<td style=\"text-align:center\">无</td>\n<td style=\"text-align:center\">必填</td>\n<td style=\"text-align:left\">mongo数据库的url连接</td>\n</tr>\n<tr>\n<td style=\"text-align:left\">userName</td>\n<td style=\"text-align:left\">String</td>\n<td style=\"text-align:center\">无</td>\n<td style=\"text-align:center\">必填</td>\n<td style=\"text-align:left\">mongo数据库的用户名密码</td>\n</tr>\n<tr>\n<td style=\"text-align:left\">password</td>\n<td style=\"text-align:left\">String</td>\n<td style=\"text-align:center\">无</td>\n<td style=\"text-align:center\">必填</td>\n<td style=\"text-align:left\">mongo数据库的密码</td>\n</tr>\n</tbody>\n</table>\n<ul>\n<li>file配置:</li>\n</ul>\n<table>\n<thead>\n<tr>\n<th style=\"text-align:left\">名称</th>\n<th style=\"text-align:left\">类型</th>\n<th style=\"text-align:center\">默认值</th>\n<th style=\"text-align:center\">是否必填</th>\n<th style=\"text-align:left\">说明</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td style=\"text-align:left\">path</td>\n<td style=\"text-align:left\">String</td>\n<td style=\"text-align:center\">无</td>\n<td style=\"text-align:center\">非必填</td>\n<td style=\"text-align:left\">文件存储路径</td>\n</tr>\n<tr>\n<td style=\"text-align:left\">prefix</td>\n<td style=\"text-align:left\">String</td>\n<td style=\"text-align:center\">无</td>\n<td style=\"text-align:center\">非必填</td>\n<td style=\"text-align:left\">文件存储前缀</td>\n</tr>\n</tbody>\n</table>\n<ul>\n<li>zookeeper配置:</li>\n</ul>\n<table>\n<thead>\n<tr>\n<th style=\"text-align:left\">名称</th>\n<th style=\"text-align:left\">类型</th>\n<th style=\"text-align:center\">默认值</th>\n<th style=\"text-align:center\">是否必填</th>\n<th style=\"text-align:left\">说明</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td style=\"text-align:left\">host</td>\n<td style=\"text-align:left\">String</td>\n<td style=\"text-align:center\">localhost:2181</td>\n<td style=\"text-align:center\">必填</td>\n<td style=\"text-align:left\">zk服务ip与端口</td>\n</tr>\n<tr>\n<td style=\"text-align:left\">sessionTimeOut</td>\n<td style=\"text-align:left\">int(ms)</td>\n<td style=\"text-align:center\">1000</td>\n<td style=\"text-align:center\">非必填</td>\n<td style=\"text-align:left\">session超时时间</td>\n</tr>\n<tr>\n<td style=\"text-align:left\">rootPath</td>\n<td style=\"text-align:left\">String</td>\n<td style=\"text-align:center\">/hmily</td>\n<td style=\"text-align:center\">必填</td>\n<td style=\"text-align:left\">存储根路径</td>\n</tr>\n</tbody>\n</table>\n<ul>\n<li>redis配置:</li>\n</ul>\n<table>\n<thead>\n<tr>\n<th style=\"text-align:left\">名称</th>\n<th style=\"text-align:left\">类型</th>\n<th style=\"text-align:center\">默认值</th>\n<th style=\"text-align:center\">是否必填</th>\n<th style=\"text-align:left\">说明</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td style=\"text-align:left\">cluster</td>\n<td style=\"text-align:left\">boolean</td>\n<td style=\"text-align:center\">false</td>\n<td style=\"text-align:center\">非必填</td>\n<td style=\"text-align:left\">是否是集群</td>\n</tr>\n<tr>\n<td style=\"text-align:left\">sentinel</td>\n<td style=\"text-align:left\">boolean</td>\n<td style=\"text-align:center\">false</td>\n<td style=\"text-align:center\">非必填</td>\n<td style=\"text-align:left\">是否是哨兵模式</td>\n</tr>\n<tr>\n<td style=\"text-align:left\">clusterUrl</td>\n<td style=\"text-align:left\">String</td>\n<td style=\"text-align:center\">无</td>\n<td style=\"text-align:center\">非必填</td>\n<td style=\"text-align:left\">集群url，多个节点使用 <code>;</code> 分隔</td>\n</tr>\n<tr>\n<td style=\"text-align:left\">sentinelUrl</td>\n<td style=\"text-align:left\">String</td>\n<td style=\"text-align:center\">无</td>\n<td style=\"text-align:center\">非必填</td>\n<td style=\"text-align:left\">哨兵url，多个节点使用 <code>;</code> 分隔</td>\n</tr>\n<tr>\n<td style=\"text-align:left\">masterName</td>\n<td style=\"text-align:left\">String</td>\n<td style=\"text-align:center\">无</td>\n<td style=\"text-align:center\">非必填</td>\n<td style=\"text-align:left\">主节点名称，没有设置可以不填</td>\n</tr>\n<tr>\n<td style=\"text-align:left\">hostName</td>\n<td style=\"text-align:left\">String</td>\n<td style=\"text-align:center\">无</td>\n<td style=\"text-align:center\">非必填</td>\n<td style=\"text-align:left\">redis单机模式下的host</td>\n</tr>\n<tr>\n<td style=\"text-align:left\">port</td>\n<td style=\"text-align:left\">int</td>\n<td style=\"text-align:center\">无</td>\n<td style=\"text-align:center\">非必填</td>\n<td style=\"text-align:left\">redis单机模式下的端口</td>\n</tr>\n<tr>\n<td style=\"text-align:left\">password</td>\n<td style=\"text-align:left\">String</td>\n<td style=\"text-align:center\">无</td>\n<td style=\"text-align:center\">非必填</td>\n<td style=\"text-align:left\">redis服务密码</td>\n</tr>\n<tr>\n<td style=\"text-align:left\">maxTotal</td>\n<td style=\"text-align:left\">int</td>\n<td style=\"text-align:center\">8</td>\n<td style=\"text-align:center\">非必填</td>\n<td style=\"text-align:left\">最大连接数</td>\n</tr>\n<tr>\n<td style=\"text-align:left\">maxIdle</td>\n<td style=\"text-align:left\">int</td>\n<td style=\"text-align:center\">8</td>\n<td style=\"text-align:center\">非必填</td>\n<td style=\"text-align:left\">最大空闲的连接数</td>\n</tr>\n<tr>\n<td style=\"text-align:left\">minIdle</td>\n<td style=\"text-align:left\">int</td>\n<td style=\"text-align:center\">0</td>\n<td style=\"text-align:center\">非必填</td>\n<td style=\"text-align:left\">最少空闲的连接数</td>\n</tr>\n<tr>\n<td style=\"text-align:left\">maxWaitMillis</td>\n<td style=\"text-align:left\">int</td>\n<td style=\"text-align:center\">-1</td>\n<td style=\"text-align:center\">非必填</td>\n<td style=\"text-align:left\">当资源池连接用尽后，调用者的最大等待时间(单位为毫秒)-1：表示永不超时 不建议使用默认值</td>\n</tr>\n<tr>\n<td style=\"text-align:left\">minEvictableIdleTimeMillis</td>\n<td style=\"text-align:left\">int</td>\n<td style=\"text-align:center\">1800000</td>\n<td style=\"text-align:center\">非必填</td>\n<td style=\"text-align:left\">资源池中资源最小空闲时间(单位为毫秒)，达到此值后空闲资源将被移除, 默认值1000*60 *30 = 30分钟</td>\n</tr>\n<tr>\n<td style=\"text-align:left\">softMinEvictableIdleTimeMillis</td>\n<td style=\"text-align:left\">int</td>\n<td style=\"text-align:center\">1800000</td>\n<td style=\"text-align:center\">非必填</td>\n<td style=\"text-align:left\">对象空闲多久后逐出, 当空闲时间&gt;该值 且 空闲连接&gt;最大空闲数 时直接逐出,不再根据MinEvictableIdleTimeMillis判断  (默认逐出策略)</td>\n</tr>\n<tr>\n<td style=\"text-align:left\">numTestsPerEvictionRun</td>\n<td style=\"text-align:left\">int</td>\n<td style=\"text-align:center\">3</td>\n<td style=\"text-align:center\">非必填</td>\n<td style=\"text-align:left\">每次逐出检查时 逐出的最大数目 如果为负数就是 : 1/abs(n), 默认3</td>\n</tr>\n<tr>\n<td style=\"text-align:left\">timeBetweenEvictionRunsMillis</td>\n<td style=\"text-align:left\">int</td>\n<td style=\"text-align:center\">-1</td>\n<td style=\"text-align:center\">非必填</td>\n<td style=\"text-align:left\">逐出扫描的时间间隔(毫秒) 如果为负数,则不运行逐出线程, 默认-1</td>\n</tr>\n<tr>\n<td style=\"text-align:left\">timeOut</td>\n<td style=\"text-align:left\">int</td>\n<td style=\"text-align:center\">1000</td>\n<td style=\"text-align:center\">非必填</td>\n<td style=\"text-align:left\">超时时间</td>\n</tr>\n<tr>\n<td style=\"text-align:left\">testOnCreate</td>\n<td style=\"text-align:left\">boolean</td>\n<td style=\"text-align:center\">false</td>\n<td style=\"text-align:center\">非必填</td>\n<td style=\"text-align:left\">在获取连接时,是否验证有效性</td>\n</tr>\n<tr>\n<td style=\"text-align:left\">testOnBorrow</td>\n<td style=\"text-align:left\">boolean</td>\n<td style=\"text-align:center\">false</td>\n<td style=\"text-align:center\">非必填</td>\n<td style=\"text-align:left\">在borrow一个jedis实例时，是否提前进行alidate操作；如果为true，则得到的jedis实例均是可用的</td>\n</tr>\n<tr>\n<td style=\"text-align:left\">testOnReturn</td>\n<td style=\"text-align:left\">boolean</td>\n<td style=\"text-align:center\">false</td>\n<td style=\"text-align:center\">非必填</td>\n<td style=\"text-align:left\">在return给pool时，是否提前进行validate操作</td>\n</tr>\n<tr>\n<td style=\"text-align:left\">testWhileIdle</td>\n<td style=\"text-align:left\">boolean</td>\n<td style=\"text-align:center\">false</td>\n<td style=\"text-align:center\">非必填</td>\n<td style=\"text-align:left\">如果为true，表示有一个idle object evitor线程对idle object进行扫描，如果validate失败，此object会被从pool中drop掉；这一项只有在timeBetweenEvictionRunsMillis大于0时才有意义</td>\n</tr>\n<tr>\n<td style=\"text-align:left\">blockWhenExhausted</td>\n<td style=\"text-align:left\">boolean</td>\n<td style=\"text-align:center\">true</td>\n<td style=\"text-align:center\">非必填</td>\n<td style=\"text-align:left\">连接耗尽时是否阻塞, false报异常,true阻塞直到超时, 默认true</td>\n</tr>\n</tbody>\n</table>\n<h3>metrics配置</h3>\n<p>metrics是指在hmily框架运行中，会记录调用量，耗时，事务提交与失败等等信息，目前只支持 <code>prometheus</code>.</p>\n<table>\n<thead>\n<tr>\n<th style=\"text-align:left\">名称</th>\n<th style=\"text-align:left\">类型</th>\n<th style=\"text-align:center\">默认值</th>\n<th style=\"text-align:center\">是否必填</th>\n<th style=\"text-align:left\">说明</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td style=\"text-align:left\">metricsName</td>\n<td style=\"text-align:left\">String</td>\n<td style=\"text-align:center\">prometheus</td>\n<td style=\"text-align:center\">必填</td>\n<td style=\"text-align:left\">支持的类型，目前只支持prometheus</td>\n</tr>\n<tr>\n<td style=\"text-align:left\">host</td>\n<td style=\"text-align:left\">String</td>\n<td style=\"text-align:center\">localhost</td>\n<td style=\"text-align:center\">非必填</td>\n<td style=\"text-align:left\">暴露的http服务的host，不填则会取localhost</td>\n</tr>\n<tr>\n<td style=\"text-align:left\">port</td>\n<td style=\"text-align:left\">int</td>\n<td style=\"text-align:center\">9091</td>\n<td style=\"text-align:center\">必填</td>\n<td style=\"text-align:left\">暴露的http服务的端口</td>\n</tr>\n<tr>\n<td style=\"text-align:left\">async</td>\n<td style=\"text-align:left\">boolean</td>\n<td style=\"text-align:center\">true</td>\n<td style=\"text-align:center\">非必填</td>\n<td style=\"text-align:left\">是否异步模式记录</td>\n</tr>\n<tr>\n<td style=\"text-align:left\">threadCount</td>\n<td style=\"text-align:left\">int</td>\n<td style=\"text-align:center\">2 * cpu</td>\n<td style=\"text-align:center\">非必填</td>\n<td style=\"text-align:left\">异步模式下线程数大小</td>\n</tr>\n<tr>\n<td style=\"text-align:left\">jmxConfig</td>\n<td style=\"text-align:left\">String</td>\n<td style=\"text-align:center\">无</td>\n<td style=\"text-align:center\">非必填</td>\n<td style=\"text-align:left\">jmxConfig配置，是一个json格式，具体可以参考prometheus官网</td>\n</tr>\n</tbody>\n</table>\n",
  "link": "/zh-cn/docs/hmily/config.html",
  "meta": {
    "title": "Hmily-Config",
    "keywords": "configuration",
    "description": "Hmily配置详解"
  }
}