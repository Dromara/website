{
  "filename": "context.md",
  "__html": "<h3>HmilyTransactionContext事务上下文</h3>\n<pre><code class=\"language-java\"><span class=\"hljs-meta\">@Data</span>\n<span class=\"hljs-keyword\">public</span> <span class=\"hljs-class\"><span class=\"hljs-keyword\">class</span> <span class=\"hljs-title\">HmilyTransactionContext</span> </span>{\n    \n    <span class=\"hljs-comment\">/**\n     * transId.\n     */</span>\n    <span class=\"hljs-keyword\">private</span> Long transId;\n    \n    <span class=\"hljs-comment\">/**\n     * participant id.\n     */</span>\n    <span class=\"hljs-keyword\">private</span> Long participantId;\n    \n    <span class=\"hljs-comment\">/**\n     * participant ref id.\n     */</span>\n    <span class=\"hljs-keyword\">private</span> Long participantRefId;\n    \n    <span class=\"hljs-comment\">/**\n     * this hmily action.\n     */</span>\n    <span class=\"hljs-keyword\">private</span> <span class=\"hljs-keyword\">int</span> action;\n    \n    <span class=\"hljs-comment\">/**\n     * 事务参与的角色.\n     */</span>\n    <span class=\"hljs-keyword\">private</span> <span class=\"hljs-keyword\">int</span> role;\n    \n    <span class=\"hljs-comment\">/**\n     * transType.\n     */</span>\n    <span class=\"hljs-keyword\">private</span> String transType;\n}\n</code></pre>\n<p><code>HmilyTransactionContext</code> 是Hmily分布式事务框架进行RPC调用时用于传递事务上下文的核心类,\n默认会将其存储在<code>ThreadLocal</code>中，然后进行RPC的参数传递，也可以配置使用线程上下文切换的的场景，\n这个时候需要在配置中指定 <code>contextTransmittalMode = transmittable</code>,将会使用alibaba开源类库。</p>\n<pre><code class=\"language-xml\">   <span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">dependency</span>&gt;</span>\n            <span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">groupId</span>&gt;</span>com.alibaba<span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">groupId</span>&gt;</span>\n            <span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">artifactId</span>&gt;</span>transmittable-thread-local<span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">artifactId</span>&gt;</span>\n            <span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">version</span>&gt;</span>2.11.5<span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">version</span>&gt;</span>\n   <span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">dependency</span>&gt;</span>\n</code></pre>\n<h1>Dubbo框架传递事务上下文</h1>\n<p>具体实现类在<code>org.dromara.hmily.dubbo.filter.DubboHmilyTransactionFilter</code>中，\n通过 <code>RpcContext.getContext().setAttachment(String key, String value)</code> 进行RPC传参数。</p>\n<h1>Motan框架传递事务上下文</h1>\n<p>具体实现类在<code>org.dromara.hmily.motan.filter.MotanHmilyTransactionFilter</code>中，\n通过 <code>Request.setAttachment(String key, String value)</code> 进行RPC传参数。</p>\n<h1>SpringCloud框架传递事务上下文</h1>\n<p>具体实现类在<code>org.dromara.hmily.springcloud.feign.HmilyFeignInterceptor</code>中，\n通过 <code>RequestTemplate.header(String name, String... values)</code> 进行RPC传参数。</p>\n",
  "link": "\\zh-cn\\docs\\hmily\\context.html",
  "meta": {
    "title": "Hmily-Context",
    "keywords": "Hmily-Context",
    "description": "Hmily-Context事务上下文"
  }
}