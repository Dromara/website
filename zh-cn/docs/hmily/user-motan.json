{
  "filename": "user-motan.md",
  "__html": "<h1>jar包依赖</h1>\n<ul>\n<li>在你的接口项目中引入jar包。</li>\n</ul>\n<pre><code class=\"language-java\">      &lt;dependency&gt;\n          &lt;groupId&gt;org.dromara&lt;/groupId&gt;\n          &lt;artifactId&gt;hmily-annotation&lt;/artifactId&gt;\n         &lt;version&gt;2.0.0-RELEASE&lt;/version&gt;\n      &lt;/dependency&gt;\n</code></pre>\n<ul>\n<li>\n<p>在你的motan rpc接口上加入 @Hmily注解</p>\n</li>\n<li>\n<p>在你的实现项目中引入jar包，并在实现接口上添加:@Hmily(confirmMethod = &quot;confrim&quot;, cancelMethod = &quot;cancel&quot;)confirmMethod，cancelMethod对应为的方法名称</p>\n</li>\n</ul>\n<pre><code class=\"language-xml\">        <span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">dependency</span>&gt;</span>\n            <span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">groupId</span>&gt;</span>org.dromara<span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">groupId</span>&gt;</span>\n            <span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">artifactId</span>&gt;</span>hmily-motan<span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">artifactId</span>&gt;</span>\n              <span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">version</span>&gt;</span>2.0.0-RELEASE<span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">version</span>&gt;</span>\n        <span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">dependency</span>&gt;</span>\n</code></pre>\n<ul>\n<li>\n<p>注意 confrim 与cancel 方法的参数列表与你的接口保持一致。</p>\n</li>\n<li>\n<p>confrim 方法为你try 方法的确认方法,由用户自己开发。</p>\n</li>\n<li>\n<p>cancel方法是try 方法的回滚方法,由用户自己开发。</p>\n</li>\n</ul>\n<h1>Spring XML 配置 HmilyTransactionBootstrap</h1>\n<pre><code class=\"language-xml\">  <span class=\"hljs-comment\">&lt;!-- Aspect 切面配置，是否开启AOP切面--&gt;</span>\n  <span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">aop:aspectj-autoproxy</span> <span class=\"hljs-attr\">expose-proxy</span>=<span class=\"hljs-string\">\"true\"</span>/&gt;</span>\n  <span class=\"hljs-comment\">&lt;!--扫描框架的包--&gt;</span>\n  <span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">context:component-scan</span> <span class=\"hljs-attr\">base-package</span>=<span class=\"hljs-string\">\"org.dromara.hmily.*\"</span>/&gt;</span>\n  <span class=\"hljs-comment\">&lt;!--启动类属性配置--&gt;</span>\n  <span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">bean</span> <span class=\"hljs-attr\">id</span>=<span class=\"hljs-string\">\"hmilyTransactionBootstrap\"</span> <span class=\"hljs-attr\">class</span>=<span class=\"hljs-string\">\"org.dromara.hmily.core.bootstrap.HmilyTransactionBootstrap\"</span>&gt;</span>\n        <span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">property</span> <span class=\"hljs-attr\">name</span>=<span class=\"hljs-string\">\"serializer\"</span> <span class=\"hljs-attr\">value</span>=<span class=\"hljs-string\">\"kryo\"</span>/&gt;</span>\n        <span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">property</span> <span class=\"hljs-attr\">name</span>=<span class=\"hljs-string\">\"recoverDelayTime\"</span> <span class=\"hljs-attr\">value</span>=<span class=\"hljs-string\">\"120\"</span>/&gt;</span>\n        <span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">property</span> <span class=\"hljs-attr\">name</span>=<span class=\"hljs-string\">\"retryMax\"</span> <span class=\"hljs-attr\">value</span>=<span class=\"hljs-string\">\"3\"</span>/&gt;</span>\n        <span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">property</span> <span class=\"hljs-attr\">name</span>=<span class=\"hljs-string\">\"loadFactor\"</span> <span class=\"hljs-attr\">value</span>=<span class=\"hljs-string\">\"2\"</span>/&gt;</span>\n        <span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">property</span> <span class=\"hljs-attr\">name</span>=<span class=\"hljs-string\">\"scheduledDelay\"</span> <span class=\"hljs-attr\">value</span>=<span class=\"hljs-string\">\"120\"</span>/&gt;</span>\n        <span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">property</span> <span class=\"hljs-attr\">name</span>=<span class=\"hljs-string\">\"scheduledThreadMax\"</span> <span class=\"hljs-attr\">value</span>=<span class=\"hljs-string\">\"4\"</span>/&gt;</span>\n        <span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">property</span> <span class=\"hljs-attr\">name</span>=<span class=\"hljs-string\">\"bufferSize\"</span> <span class=\"hljs-attr\">value</span>=<span class=\"hljs-string\">\"4096\"</span>/&gt;</span>\n        <span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">property</span> <span class=\"hljs-attr\">name</span>=<span class=\"hljs-string\">\"consumerThreads\"</span> <span class=\"hljs-attr\">value</span>=<span class=\"hljs-string\">\"32\"</span>/&gt;</span>\n        <span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">property</span> <span class=\"hljs-attr\">name</span>=<span class=\"hljs-string\">\"started\"</span> <span class=\"hljs-attr\">value</span>=<span class=\"hljs-string\">\"false\"</span>/&gt;</span>\n        <span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">property</span> <span class=\"hljs-attr\">name</span>=<span class=\"hljs-string\">\"asyncThreads\"</span> <span class=\"hljs-attr\">value</span>=<span class=\"hljs-string\">\"32\"</span>/&gt;</span>\n        <span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">property</span> <span class=\"hljs-attr\">name</span>=<span class=\"hljs-string\">\"repositorySupport\"</span> <span class=\"hljs-attr\">value</span>=<span class=\"hljs-string\">\"db\"</span>/&gt;</span>\n        <span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">property</span> <span class=\"hljs-attr\">name</span>=<span class=\"hljs-string\">\"hmilyDbConfig\"</span>&gt;</span>\n            <span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">bean</span> <span class=\"hljs-attr\">class</span>=<span class=\"hljs-string\">\"org.dromara.hmily.common.config.HmilyDbConfig\"</span>&gt;</span>\n                <span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">property</span> <span class=\"hljs-attr\">name</span>=<span class=\"hljs-string\">\"url\"</span>\n                          <span class=\"hljs-attr\">value</span>=<span class=\"hljs-string\">\"jdbc:mysql://192.168.1.98:3306/tcc?useUnicode=true&amp;amp;characterEncoding=utf8\"</span>/&gt;</span>\n                <span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">property</span> <span class=\"hljs-attr\">name</span>=<span class=\"hljs-string\">\"driverClassName\"</span> <span class=\"hljs-attr\">value</span>=<span class=\"hljs-string\">\"com.mysql.jdbc.Driver\"</span>/&gt;</span>\n                <span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">property</span> <span class=\"hljs-attr\">name</span>=<span class=\"hljs-string\">\"username\"</span> <span class=\"hljs-attr\">value</span>=<span class=\"hljs-string\">\"root\"</span>/&gt;</span>\n                <span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">property</span> <span class=\"hljs-attr\">name</span>=<span class=\"hljs-string\">\"password\"</span> <span class=\"hljs-attr\">value</span>=<span class=\"hljs-string\">\"123456\"</span>/&gt;</span>\n            <span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">bean</span>&gt;</span>\n        <span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">property</span>&gt;</span>\n    <span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">bean</span>&gt;</span>\n</code></pre>\n<ul>\n<li>\n<p>配置开启AOP切面。</p>\n</li>\n<li>\n<p>扫描Hmily框架的包。</p>\n</li>\n<li>\n<p>配置Hmiiy框架参数。</p>\n</li>\n</ul>\n<h1>Spring boot start 配置 HmilyTransactionBootstrap</h1>\n<ul>\n<li>在你的实现项目中引入Springboot-start支持的包，并在实现接口上添加:</li>\n</ul>\n<pre><code class=\"language-xml\">        <span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">dependency</span>&gt;</span>\n            <span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">groupId</span>&gt;</span>org.dromara<span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">groupId</span>&gt;</span>\n            <span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">artifactId</span>&gt;</span>hmily-spring-boot-starter-motan<span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">artifactId</span>&gt;</span>\n              <span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">version</span>&gt;</span>2.0.0-RELEASE<span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">version</span>&gt;</span>\n        <span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">dependency</span>&gt;</span>\n</code></pre>\n<ul>\n<li>在你的yml中配置</li>\n</ul>\n<pre><code class=\"language-yml\"><span class=\"hljs-attr\">org:</span>\n    <span class=\"hljs-attr\">dromara:</span>\n         <span class=\"hljs-attr\">hmily :</span>\n            <span class=\"hljs-attr\">serializer :</span> <span class=\"hljs-string\">kryo</span>\n            <span class=\"hljs-attr\">recoverDelayTime :</span> <span class=\"hljs-number\">128</span>\n            <span class=\"hljs-attr\">retryMax :</span> <span class=\"hljs-number\">30</span>\n            <span class=\"hljs-attr\">scheduledDelay :</span> <span class=\"hljs-number\">128</span>\n            <span class=\"hljs-attr\">scheduledThreadMax :</span>  <span class=\"hljs-number\">10</span>\n            <span class=\"hljs-attr\">repositorySupport :</span> <span class=\"hljs-string\">db</span>\n            <span class=\"hljs-attr\">started:</span> <span class=\"hljs-literal\">false</span>\n            <span class=\"hljs-attr\">hmilyDbConfig :</span>\n                 <span class=\"hljs-attr\">driverClassName  :</span> <span class=\"hljs-string\">com.mysql.jdbc.Driver</span>\n                 <span class=\"hljs-attr\">url :</span>  <span class=\"hljs-string\">jdbc:mysql://192.168.1.98:3306/tcc?useUnicode=true&amp;amp;characterEncoding=utf8</span>\n                 <span class=\"hljs-attr\">username :</span> <span class=\"hljs-string\">root</span>\n                 <span class=\"hljs-attr\">password :</span> <span class=\"hljs-number\">123456</span>\n\n</code></pre>\n<ul>\n<li>具体的详解请看<a href=\"configuration.md\">配置详解</a></li>\n</ul>\n",
  "link": "\\zh-cn\\docs\\hmily\\user-motan.html",
  "meta": {
    "title": "motan用户指南",
    "keywords": "motan",
    "description": "motan用户指南"
  }
}