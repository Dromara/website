{
  "filename": "user-dubbo.md",
  "__html": "<h3>首先启动raincat-manager，具体怎么启动参考 <a href=\"start-manager.md\">启动manager</a></h3>\n<h3>jar包依赖，在你的dubbo服务端添加jar包，并在需要参与分布式事务的方法上添加 @TxTransaction注解</h3>\n<pre><code class=\"language-java\">       &lt;dependency&gt;\n           &lt;groupId&gt;org.dromara&lt;/groupId&gt;\n           &lt;artifactId&gt;raincat-dubbo&lt;/artifactId&gt;\n           &lt;version&gt;2.0.0-RELEASE&lt;/version&gt;\n       &lt;/dependency&gt;\n</code></pre>\n<h1>Spring XML方式配置 TxTransactionBootstrap</h1>\n<pre><code class=\"language-xml\">    <span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">context:component-scan</span> <span class=\"hljs-attr\">base-package</span>=<span class=\"hljs-string\">\"org.dromara.*\"</span>/&gt;</span>\n    <span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">aop:aspectj-autoproxy</span> <span class=\"hljs-attr\">expose-proxy</span>=<span class=\"hljs-string\">\"true\"</span>/&gt;</span>\n    <span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">bean</span> <span class=\"hljs-attr\">id</span>=<span class=\"hljs-string\">\"txTransactionBootstrap\"</span> <span class=\"hljs-attr\">class</span>=<span class=\"hljs-string\">\"org.dromara.raincat.core.bootstrap.TxTransactionBootstrap\"</span>&gt;</span>\n        <span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">property</span> <span class=\"hljs-attr\">name</span>=<span class=\"hljs-string\">\"txManagerUrl\"</span> <span class=\"hljs-attr\">value</span>=<span class=\"hljs-string\">\"http://localhost:8761\"</span>/&gt;</span>\n        <span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">property</span> <span class=\"hljs-attr\">name</span>=<span class=\"hljs-string\">\"serializer\"</span> <span class=\"hljs-attr\">value</span>=<span class=\"hljs-string\">\"kryo\"</span>/&gt;</span>\n        <span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">property</span> <span class=\"hljs-attr\">name</span>=<span class=\"hljs-string\">\"nettySerializer\"</span> <span class=\"hljs-attr\">value</span>=<span class=\"hljs-string\">\"kryo\"</span>/&gt;</span>\n        <span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">property</span> <span class=\"hljs-attr\">name</span>=<span class=\"hljs-string\">\"compensation\"</span> <span class=\"hljs-attr\">value</span>=<span class=\"hljs-string\">\"true\"</span>/&gt;</span>\n        <span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">property</span> <span class=\"hljs-attr\">name</span>=<span class=\"hljs-string\">\"compensationCacheType\"</span> <span class=\"hljs-attr\">value</span>=<span class=\"hljs-string\">\"db\"</span>/&gt;</span>\n        <span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">property</span> <span class=\"hljs-attr\">name</span>=<span class=\"hljs-string\">\"txDbConfig\"</span>&gt;</span>\n            <span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">bean</span> <span class=\"hljs-attr\">class</span>=<span class=\"hljs-string\">\"org.dromara.raincat.common.config.TxDbConfig\"</span>&gt;</span>\n                <span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">property</span> <span class=\"hljs-attr\">name</span>=<span class=\"hljs-string\">\"url\"</span>\n                          <span class=\"hljs-attr\">value</span>=<span class=\"hljs-string\">\"jdbc:mysql://192.168.1.98:3306/tx?useUnicode=true&amp;amp;characterEncoding=utf8\"</span>/&gt;</span>\n                <span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">property</span> <span class=\"hljs-attr\">name</span>=<span class=\"hljs-string\">\"driverClassName\"</span> <span class=\"hljs-attr\">value</span>=<span class=\"hljs-string\">\"com.mysql.jdbc.Driver\"</span>/&gt;</span>\n                <span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">property</span> <span class=\"hljs-attr\">name</span>=<span class=\"hljs-string\">\"username\"</span> <span class=\"hljs-attr\">value</span>=<span class=\"hljs-string\">\"root\"</span>/&gt;</span>\n                <span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">property</span> <span class=\"hljs-attr\">name</span>=<span class=\"hljs-string\">\"password\"</span> <span class=\"hljs-attr\">value</span>=<span class=\"hljs-string\">\"123456\"</span>/&gt;</span>\n            <span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">bean</span>&gt;</span>\n        <span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">property</span>&gt;</span>\n    <span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">bean</span>&gt;</span>\n</code></pre>\n<h1>Spring boot start方式配置 TxTransactionBootstrap</h1>\n<ul>\n<li>首先依赖raincat 提供的spring-boot-starter-dubbo</li>\n</ul>\n<pre><code class=\"language-xml\"> <span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">dependency</span>&gt;</span>\n     <span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">groupId</span>&gt;</span>org.dromara<span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">groupId</span>&gt;</span>\n     <span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">artifactId</span>&gt;</span>raincat-spring-boot-starter-dubbo<span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">artifactId</span>&gt;</span>\n     <span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">version</span>&gt;</span>2.0.0-RELEASE<span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">version</span>&gt;</span>\n <span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">dependency</span>&gt;</span>\n</code></pre>\n<ul>\n<li>配置 application.yml</li>\n</ul>\n<pre><code class=\"language-yml\"><span class=\"hljs-attr\">org:</span>\n   <span class=\"hljs-attr\">dromara:</span>\n     <span class=\"hljs-attr\">raincat:</span>\n       <span class=\"hljs-attr\">txManagerUrl:</span> <span class=\"hljs-string\">http://localhost:8761</span>\n       <span class=\"hljs-attr\">serializer:</span> <span class=\"hljs-string\">kroy</span>\n       <span class=\"hljs-attr\">nettySerializer:</span> <span class=\"hljs-string\">kroy</span>\n       <span class=\"hljs-attr\">compensation:</span> <span class=\"hljs-literal\">true</span>\n       <span class=\"hljs-attr\">compensationCacheType :</span> <span class=\"hljs-string\">db</span>\n       <span class=\"hljs-attr\">txDbConfig :</span>\n              <span class=\"hljs-attr\">driverClassName  :</span> <span class=\"hljs-string\">com.mysql.jdbc.Driver</span>\n              <span class=\"hljs-attr\">url :</span>  <span class=\"hljs-string\">jdbc:mysql://192.168.1.98:3306/tx?useUnicode=true&amp;amp;characterEncoding=utf8</span>\n              <span class=\"hljs-attr\">username :</span> <span class=\"hljs-string\">root</span>\n              <span class=\"hljs-attr\">password :</span> <span class=\"hljs-number\">123456</span>\n</code></pre>\n<ul>\n<li>\n<p>txManagerUrl：填写你启动的txManager的ip端口，注意添加http://</p>\n</li>\n<li>\n<p>serializer： 是指事务日志的序列化方式</p>\n</li>\n<li>\n<p>nettySerializer： 与txManager通信对象的序列化方法，注意与txManager中的序列化方式配置一样。</p>\n</li>\n<li>\n<p>compensation ：是否需要补偿，极端情况下，服务自身会进行补偿。</p>\n</li>\n<li>\n<p>compensationCacheType： 存储日志类型，当然还有支持redis，mongo，zookeeper等等，具体可以参考 <a href=\"config.md\">配置详解</a>。</p>\n</li>\n</ul>\n<h3>配置扫描raincat包，与开启AOP代理（XML方式配置的时候必须加上，starter方式不需要）。</h3>\n<h3>如果有任何问题可以参考<a href=\"https://github.com/yu199195/Raincat/tree/master/raincat-sample/raincat-dubbo-sample\">dubbo-sample</a></h3>\n",
  "link": "\\zh-cn\\docs\\raincat\\user-dubbo.html",
  "meta": {
    "title": "dubbo用户指南",
    "keywords": "dubbo",
    "description": "dubbo用户指南"
  }
}